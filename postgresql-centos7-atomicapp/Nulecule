---
specversion: 0.0.2
id: postgresql-atomicapp

metadata:
  name: PostgreSQL Atomic App
  appversion: 1.0.0
  description: This is PostgreSQL

params:
  - name: db_user
    description: Database User
  - name: db_pass
    description: Database Password
  - name: db_name
    description: Database Name
  - name: service
    description: Name of the service
    default: posgtres
  - name: host_port
    desription: Port to bind postgres service in host
    default: 5432

graph:
  - name: postgresql-atomicapp
    params:
        db_user: $db_user
        db_pass: $db_pass
        db_name: $db_name
        service: $service
        hostPort: $host_port
    artifacts:
      kubernetes:
        - file://artifacts/kubernetes/postgresql-pod.yaml
        - file://artifacts/kubernetes/postgresql-service.yaml
      openshift:
        - inherit:
          - kubernetes
      docker:
        - file://artifacts/docker/postgresql-app-pod_run
